@using ClassLibrary
@using DbAccessLibrary.Models
 @model List<Cart>


<section class="main_content">
        <nav class="navigation_account">
            <div id = "nav_title" class="nav_title">Мій акаунт</div>
            <div class="nav_items">
                <ul>
                    <a asp-controller="MyAccount" asp-action="Cart" ><li>Кошик</li></a>
                    <a asp-controller="MyAccount" asp-action="Orders" ><li>Мої замовлення</li></a>
                    <a asp-area="Identity" asp-page="/Account/Manage/ChangePassword" ><li>Дані облікового запису</li></a>
                    <a asp-controller="MyAccount" asp-action="Ads" ><li>Мої оголошення</li></a>
                </ul>
            </div>
        </nav>
        <div class="mine_block">
            <div class="location"><p><strong>Мій акаунт</strong></p><p>> Мої замовлення</p></div>
            <h2>Мої замовлення</h2>

          @if(Model.Count == 0)
            {
            <div class="empty_block">
                <p>ЗАМОВЛЕНЬ НЕМАЄ</p>
                <button class="form_btn"><strong><a asp-controller="Home" asp-action="Index" >НА ГОЛОВНУ</a></strong></button>
            </div>
        } else  {
                @for(int i = 0; i < Model.Count() - 1; )
                    {
                <div class="order_block">
                         @{int total = 0;/* @Model[i].Clothes.Price * @Model[i].Quantity;*/}
                            <div class="cart_wrapper">
                            @do 
                                {
                            total += @Model[i].Clothes.Price * @Model[i].Quantity;
                            <div class="goods">
                                     @{  var imgSrc = FunctionsLib.GetImageSourceFromBytes(Model[i].Clothes.PreviewImage);
                                   <img src="@imgSrc"  alt="goods" />   }
                                    <div class = "about_goods">
                                        <h2>@Model[i].Clothes.Name</h2>
                                        <p>Колір: @Model[i].Clothes.Color</p>
                                        <p>Розмір: @Model[i].Size </p>
                                        <p>@Model[i].Quantity <span>шт.</span></p>
                                        <p >@Model[i].Clothes.Price <span>грн</span></p>
                                    </div>
                            </div>
                            int dayIndex = i;
                        }
                                @while(@DateTime.Equals(@Model[i].Date.Date, @Model[++i].Date.Date)
                                && i < @Model.Count()-1);
                                
                            </div> 
                                 <div class="order_info">
                                <p class="price_info">Оплата: <span>@total </span>грн</p>
                                <p class="data_info">Дата: <span>@Model[i-1].Date.ToString("dd/MM/yyyy") </span></p>
                            </div>
                        </div>             
                    }
            }
            </div>
        }
    </section>